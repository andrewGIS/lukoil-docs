
Общая информация 
=============================================

Программа предназначена для работников компании Лукойл-Коми и используется в качестве интегратора разных источников данных в среде MapInfo

История изменений:

    ``"0.15"`` от 16.01.2018  
        - Добавлены снимки SPOT на территорию Усинска
        - Обновлены слои с границами

    ``"0.16"`` от 22.01.2018
        - Исправлены баги №3, №4, №5 (список всех можно найти `здесь <http://github.com/andrewGIS/Komi_Issues/issues>`_)
        - Добавлена возможность выбора значения из поля **Квартал** в запросе по адресу
    
    ``"0.17"`` от 25.01.2018
        - Исправлен баг №6
        - Добавлены снимки высокого пространственного разрешения

    ``"0.17.1"`` от 16.02.2018
        - Добавлены снимки высокого пространственного разрешения Planet

    ``"0.17.2"`` от 04.04.2018
        - Исправлена ошибка отображения поля Номер документа основания предоставления земли

    ``"0.17.3"`` от 12.04.2018
        - Добавлен слой «Проектные границы ЗУ»

    ``"0.18"`` от 20.07.2018
        - Обновлены слои, изменены названия
        - Поиск по ID участка вывыден в главное меню
        - Поиск по номеру договора вывыден в главное меню, выбор сделан с помощью автодополнения 
        - Результат выборки по графике сохраняется во временной таблице **Последняя_выборка_графика**

    ``"0.19"`` от 28.11.2018
        - Возможность сохранять свой набор слоев в новом рабочем наборе
В целом программа физически представляет собой папку с различными модулями

.. figure:: img/folder.png
    :align: center
    :alt: center
    :name: Вид программы

    Структура программы на диске
    
Функционал программы содержится в двух основных панелях 

    1. Панель меню -- **Инструменты**
        .. figure:: img/menuPanel.png
            :align: center
            :alt: Дополнительная панель меню
            :name: Дополнительная панель меню

            Дополнительная панель меню
    2. Контекстное меню -- **Лукойл**
        .. figure:: img/contextMenu.png
            :scale: 50 %
            :align: center
            :name: Дополнительное контекстное меню
            :alt: Дополнительное контекстное меню

            Дополнительное контекстное меню


По умолчанию в программу подгружаются следующие слои:

    * **Месторождения** -- слой полигональных объектов, с помощью которого осуществляется связь с базой (по индексу). Также в этом слое содержится информация о местоположении объекта
    * **Месторождения_точки** -- слой "поворотных" точек 
    * **Договора_НАО_СК63** -- полигональный слой, который отображает границы области (не загружается с версии 0.18)
    * **ГКН_Участки** -- полигональный слой, который отображает границы кадастровых участков
    * **ГКН_Кварталы** -- полигональный слой, который отображает границы кадастровых кварталов
    * **SP6_20170722_8byte_** -- фрагменты снимка SPOT--6
    * **SA_2017_** -- фрагменты снимков Sentinel -- 2A

.. versionadded:: 0.17
* **_1(2) и т.д.** -- фрагменты снимков высокого пространственного разрешения

.. versionadded:: 0.17.1
* **Planet_ и т.д.** -- фрагменты снимков Planet высокого пространственного разрешения 

.. versionadded:: 0.17.2
* Исправлена ошибка отображения поля Номер документа основания предоставления земли 

.. versionadded:: 0.17.3
* Добавлен слой «Проектные границы ЗУ»

.. versionadded:: 0.18
* Обновлены слои, изменены названия
* Поиск по ID участка вывыден в главное меню
* Поиск по номеру договора вывыден в главное меню, выбор сделан с помощью автодополнения 
* Результат выборки по графике сохраняется во временной таблице **Последняя_выборка_графика**

.. versionadded:: 0.19
* Возможность добавление собственных слоев

    Перечень шагов для добавления дополнительных слоев 

    1. Установить программу MapBasic версия 11.5 (https://mapbasic.ru/download)

    2. Положить ваш слой в папку data c программкой

    3. Открыть файлик openTables c помощью установленной программы MapBasic, здесь потребуется изменить код в двух местах

            Open Table dataDir + "Месторождения_точки" As Месторождения_точки  Interactive
            Open Table dataDir + "Проектные границы ЗУ" As Проектные_границы_ЗУ Interactive

    Здесь необходимо написать название вашего слоя, который вы положили в папку data. Для каждого слоя будет отдельная строчка. После     слова As необходимо написать, то название, которое будет в MapInfo.

    Например, хочу добавить два слоя. Фрагмент кода станет выглядеть так

            Open Table dataDir + "Месторождения_точки" As Месторождения_точки  Interactive
            Open Table dataDir + "Проектные границы ЗУ" As Проектные_границы_ЗУ Interactive
            Open Table dataDir + "Мой_слой" As Мой_слой Interactive
            Open Table dataDir + "Мой_слой_1" As Месторождения_полигоны Interactive

    После этого необходимо изменить строчку

            Map From Месторождения, Месторождения_точки, ГКН_Участки,
            ГКН_Кварталы,Проектные_границы_ЗУ, <<Здесь через запятую написать все слои, которые вы добавили их имена после          последнего обязательно запятую!>>
            SP6_20170722_8byte_p1,SP6_20170722_8byte_p2,S2A_2017_p1,

    С учетом примера выше строчка станет выглядеть так

            Map From Месторождения, Месторождения_точки, ГКН_Участки,
            ГКН_Кварталы,Проектные_границы_ЗУ, Мой_слой,Месторождения_полигоны,
            SP6_20170722_8byte_p1,SP6_20170722_8byte_p2,S2A_2017_p1,

    После этого необходимо нажать Project - Compile Current File. В появившемся окне необходимо нажать ок

    4. Если все хорошо, то появится окно Successful Compilation . Далее в этом же окне выбрать Project - Select Project File и выбрать в папке mainCode файл Lukoil.mbp. После загрузки Необходимо выбрать Link - Link Current Project. Если появится окно Link Succeeded то вы все сделали правильно. Теперь рабочий набор будет загружаться с вашими слоями. 

База ведется в системе координат **СК63**.
   
